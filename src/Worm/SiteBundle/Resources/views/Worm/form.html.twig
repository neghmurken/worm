{% extends 'WormSiteBundle::layout.html.twig' %}

{% block container %}
    <h2>{{ worm ? worm.title : 'Créer un vers' }}</h2>

    {% for type, messages in app.session.flashBag.all %}
        <div class="alert alert-{{ type }}">
            <ul>
                {% for message in messages %}
                    <li>{{ message }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endfor %}

    <form method="post"
          action="{{ worm ? path('wormsite_worm_update', {'id': worm.id}) : path('wormsite_worm_create') }}"
          class="well worm-form">
        <div class="control-group">
            {{ form_label(form.name, null, {'label_attr': {'class': 'control-label' }}) }}
            <div class="controls">
                {{ form_widget(form.name, {'attr': {'class': 'input-block-level' }}) }}
                {{ form_errors(form.name) }}
            </div>
        </div>

        <div class="control-group">
            {{ form_label(form.mode, null, {'label_attr': {'class': 'control-label' }}) }}
            <div class="controls">
                {% for item in form.mode %}
                    <label class="radio inline" for="{{ item.vars.id }}">
                        {{ form_widget(item) }}
                        {{ item.vars.label }}
                    </label>
                {% endfor %}
            </div>
        </div>

        <div class="control-group">
            <div class="row-fluid">
                <div class="span6">
                    <div class="control-group">
                        {{ form_label(form.width, null, {'label_attr': {'class': 'control-label' }}) }}
                        <div class="controls">
                            <div class="input-append">
                                {{ form_widget(form.width, {'attr': {'class': 'input-mini' }}) }}
                                <span class="add-on">px</span>
                            </div>
                            {{ form_errors(form.width) }}
                        </div>
                    </div>
                </div>
                <div class="span6">
                    <div class="control-group">
                        {{ form_label(form.height, null, {'label_attr': {'class': 'control-label' }}) }}
                        <div class="controls">
                            <div class="input-append">
                                {{ form_widget(form.height, {'attr': {'class': 'input-mini' }}) }}
                                <span class="add-on">px</span>
                            </div>
                            {{ form_errors(form.height) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="control-group">
            {{ form_label(form.timeLimit, null, {'label_attr': {'class': 'control-label' }}) }}
            <div class="controls">
                <div class="input-append">
                    {{ form_widget(form.timeLimit, {'attr': {'class': 'input-mini' }}) }}
                    <span class="add-on">jours</span>
                </div>
                {{ form_errors(form.timeLimit) }}
            </div>
        </div>

        <div class="control-group">
            <div class="controls">
                <label class="checkbox inline" for="{{ form.uniqueQueue.vars.id }}">
                    {{ form_widget(form.uniqueQueue) }}
                    {{ form.uniqueQueue.vars.label }}
                </label>
            </div>
        </div>

        <hr/>

        <div class="submit">
            {{ form_widget(form._token) }}
            <button type="submit" class="btn btn-primary">Créer</button>
        </div>

    </form>
{% endblock %}